import{r as n,R as I,j as l,y as S,c as P}from"./chunk-CF0Whru-.js";const E=e=>{const t="ontouchstart"in window;(window.matchMedia("(max-width: 1024px)").matches||t)&&e.requestFullscreen()},g=n.createContext({onInitPlayer:()=>{},status:"initial"}),F="https://www.youtube-nocookie.com",L="https://www.youtube.com",x="https://img.youtube.com",j=e=>{if(e)try{const t=new URL(e);return t.pathname==="/embed"?void 0:t.hostname==="youtu.be"?t.pathname.slice(1):t.searchParams.get("v")||t.pathname.split("/").pop()}catch{return e}},T=(e,t)=>{var r,o;const c=j(e.url),i=new URL(t);if(c)i.pathname=`/embed/${c}`;else if(e.url)try{const s=new URL(e.url);i.pathname=s.pathname,i.search=s.search}catch{}const d=Object.keys(e),a={};a.autoplay="1";for(const s of d)if(e[s]!==void 0)switch(s){case"autoplay":e.autoplay&&e.muted===void 0&&(a.mute="1");break;case"muted":a.mute=e.muted?"1":"0";break;case"showControls":a.controls=e.showControls?"1":"0";break;case"showRelatedVideos":a.rel=e.showRelatedVideos?"1":"0";break;case"keyboard":a.keyboard=e.keyboard?"1":"0";break;case"loop":a.loop=e.loop?"1":"0",e.loop&&(e.playlist??"").trim()===""&&(a.playlist=c);break;case"inline":a.playsinline=e.inline?"1":"0";break;case"allowFullscreen":a.fs=e.allowFullscreen?"1":"0";break;case"captionLanguage":a.cc_lang_pref=e.captionLanguage;break;case"showCaptions":a.cc_load_policy=e.showCaptions?"1":"0";break;case"showAnnotations":a.iv_load_policy=e.showAnnotations?"1":"3";break;case"startTime":a.start=(r=e.startTime)==null?void 0:r.toString();break;case"endTime":a.end=(o=e.endTime)==null?void 0:o.toString();break;case"disableKeyboard":a.disablekb=e.disableKeyboard?"1":"0";break;case"language":a.hl=e.language;break;case"listId":a.list=e.listId;break;case"listType":a.listType=e.listType;break;case"color":a.color=e.color;break;case"origin":a.origin=e.origin;break;case"referrer":a.widget_referrer=e.referrer;break;case"playlist":a.playlist=e.playlist;break;case"enablejsapi":a.enablejsapi=e.enablejsapi?"1":"0";break}return Object.entries(a).forEach(([s,u])=>{u!==void 0&&i.searchParams.append(s,u.toString())}),i.toString()},A=e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="true",document.head.appendChild(t)};let C=!1;const V=e=>{if(!(C||window.matchMedia("(hover: none)").matches)){try{const t=new URL(e);A(t.origin)}catch{}A(x),C=!0}},N=e=>new URL(`${x}/vi/${e}/maxresdefault.jpg`),_=()=>l.jsx("div",{className:"flex w-full h-full items-center justify-center text-lg",children:'Open the "Settings" panel and paste a video URL, e.g. https://youtube.com/watch?v=dQw4w9WgXcQ'}),O=({title:e,status:t,loading:r,videoUrl:o,previewImageUrl:c,autoplay:i,inline:d,renderer:a,showPreview:s,onStatusChange:u,onPreviewImageUrlChange:p})=>{const[y,w]=n.useState(0),h=n.useRef(null);return n.useEffect(()=>{i&&a!=="canvas"&&t==="initial"&&u("loading")},[i,t,a,u]),n.useEffect(()=>{a!=="canvas"&&V(o)},[a,o]),n.useEffect(()=>{const m=j(o);if(!m||!s){p(void 0);return}c||p(N(m))},[p,s,o,c]),a==="canvas"||t==="initial"?null:l.jsx("iframe",{ref:h,title:e,src:o,loading:r,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",width:"100%",height:"100%",opacity:y,transition:"opacity 1s",border:"none"},onLoad:()=>{u("ready"),w(1),!d&&!i&&h.current&&E(h.current)}})},$=n.forwardRef(({url:e,loading:t="lazy",autoplay:r,showPreview:o,showAnnotations:c,showCaptions:i,showControls:d,allowFullscreen:a,keyboard:s,children:u,privacyEnhancedMode:p,inline:y=!1,...w},h)=>{const[m,b]=n.useState("initial"),[f,R]=n.useState(),{renderer:k}=n.useContext(I),U=p??!0?F:L,v=T({...w,inline:y,url:e,keyboard:s,showAnnotations:c,showCaptions:i,allowFullscreen:a,showControls:d,autoplay:r,enablejsapi:!1},U);return l.jsx(g.Provider,{value:{status:m,previewImageUrl:f,onInitPlayer(){k!=="canvas"&&b("loading")}},children:l.jsx("div",{...w,ref:h,children:v?l.jsxs(l.Fragment,{children:[u,l.jsx(O,{title:w.title,autoplay:r,videoUrl:v,previewImageUrl:f,loading:t,inline:y,showPreview:o,renderer:k,status:m,onStatusChange:b,onPreviewImageUrlChange:R})]}):l.jsx(_,{})})})});$.displayName="YouTube";const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkOAMAANIAzr59FiYAAAAASUVORK5CYII=",M=n.forwardRef(({src:e,...t},r)=>{const o=n.useContext(g);return l.jsx(S,{...t,src:String(o.previewImageUrl??e??K),ref:r})});M.displayName="VimeoPreviewImage";function Q(){return new Promise(e=>{setTimeout(e,100),requestAnimationFrame(()=>{setTimeout(e,0)})})}const Y=n.forwardRef((e,t)=>{const r=n.useContext(g),o=n.useCallback(async()=>{await Q(),r.onInitPlayer()},[r]);if(r.status==="initial")return l.jsx(P,{...e,onClick:o,ref:t})});Y.displayName="VimeoPlayButton";const B=n.forwardRef((e,t)=>{if(n.useContext(g).status==="loading")return l.jsx("div",{...e,ref:t})});B.displayName="VimeoSpinner";export{$,Y as f,B as m,M as s};
